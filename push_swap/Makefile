NAME			=	push_swap

SRCS_DIR		=	src
SRCS			=	main.c \
					lis/find_indexes.c \
					lis/rotating_find.c \
					lis/updating.c \
					sorting/element_movements/pa_until_next_lis_elem.c \
					sorting/element_movements/pb_until_lis_elem_front.c \
					sorting/element_movements/ra_once.c \
					sorting/element_movements/rra_sorted_until_main.c \
					sorting/element_movements/rra_until_front_b_fits_a.c \
					sorting/sort_stack.c \
					sorting/sorted_stack_lookup.c \
					stack/instructions/pushes.c \
					stack/instructions/reverse_rotates.c \
					stack/instructions/rotates.c \
					stack/instructions/swaps.c \
					stack/parsing.c

OBJS			=	${SRCS:%.c=${SRCS_DIR}/%.o}

LIBSDIR			=	dependencies/libs
INCLUDESDIR		=	dependencies/includes

CC				=	cc
CFLAGS			=	-Wall -Wextra -Werror -g

RM				=	rm -f

TESTER			=	tester/tester

%.o:				%.c
					${CC} ${CFLAGS} -I${INCLUDESDIR} -c $< -o $@

all:				${NAME}
${NAME}:			${OBJS}
					${CC} ${CFLAGS} -I${INCLUDESDIR} ${OBJS} -L${LIBSDIR} -lft -o ${NAME}

clean:
					${RM} ${OBJS}
fclean:				clean
					${RM} ${NAME}

re:					fclean all

${TESTER}:
					make -C tester tester

test:				${NAME} ${TESTER}
					ARG="20 28 29 21 30 25 23 24 27 26 22"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="30 22 25 20 21 26 29 24 28 27 23"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="30 21 24 20 26 27 28 29 23 25 22"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="20 29 30 24 25 22 21 27 26 23 28"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="26 25 20 22 24 27 21 30 28 29 23"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="20 30 21 25 22 29 26 28 27 23 24"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="29 26 30 27 28 24 23 22 20 21 25"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="28 23 29 25 30 20 26 21 27 24 22"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="26 24 22 28 23 20 21 29 30 25 27"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="22 28 21 26 30 25 29 23 27 24 20"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="43 93 240 101 85 98 137 195 170 188 76 229 129 92 20 68 60 250 38 200 224 126 125 29 113 119 130 157 25 165 46 73 191 192 66 42 234 36 55 136 50 51 63 58 80 185 22 160 194 127 90 221 242 206 208 220 102 190 32 216 176 197 24 87 187 41 124 193 86 199 247 171 117 23 233 69 115 97 155 172 67 118 169 227 146 61 121 166 138 107 103 108 226 177 181 91 211 212 209 203 135 21 219 140 158 120 65 249 196 33 134 81 77 202 156 244 174 141 232 133 54 143 83 27 96 35 210 88 62 40 168 201 31 132 112 246 162 225 245 142 154 123 159 114 198 59 94 218 235 164 182 110 179 71 57 48 167 148 214 139 147 238 131 222 64 56 52 106 47 72 70 183 178 116 239 152 237 109 84 44 111 236 122 30 151 79 161 100 180 230 153 26 104 149 243 34 248 128 82 186 189 78 145 75 173 39 241 207 28 144 45 105 37 228 215 205 53 204 150 217 184 49 163 223 213 99 175 95 89 231 74"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="193 173 174 44 186 130 28 207 249 75 36 235 238 161 170 201 113 166 190 76 216 240 182 94 83 203 79 21 244 247 23 157 82 141 98 84 114 33 54 135 134 215 99 150 217 77 228 106 118 225 70 149 196 80 145 87 153 51 202 122 239 72 50 192 221 127 171 209 52 214 159 242 27 73 184 92 103 39 181 243 49 197 102 56 156 194 26 139 78 119 133 104 68 213 42 47 22 219 189 53 218 64 175 142 179 120 137 128 143 81 231 220 178 136 200 198 163 124 25 167 246 210 59 131 111 172 146 144 109 162 37 126 117 60 48 147 140 24 148 125 132 176 116 91 230 164 204 212 90 86 69 96 226 236 233 241 188 211 237 169 208 232 152 46 138 93 88 151 55 168 195 101 66 250 105 29 248 115 185 20 85 89 95 199 65 112 57 45 61 74 180 32 227 222 67 38 31 177 158 58 123 110 121 224 63 43 223 97 165 187 71 191 206 154 107 160 34 41 108 40 62 129 234 30 100 245 183 205 229 155 35"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="98 97 139 140 93 176 230 219 67 224 33 148 163 220 202 64 222 249 38 144 152 69 128 108 118 121 186 37 62 201 166 137 42 53 170 30 85 24 81 182 213 175 70 86 112 122 61 198 40 59 89 184 197 250 104 105 147 113 221 185 32 214 125 229 56 50 20 203 151 88 223 179 54 206 109 29 245 192 28 178 242 74 187 231 244 94 204 162 126 106 116 82 60 226 99 115 43 157 208 232 227 87 36 77 95 154 149 124 246 34 207 241 35 75 239 200 117 79 123 129 92 141 132 119 51 158 173 190 247 196 194 205 142 45 180 165 58 169 189 78 114 172 236 193 31 84 167 234 102 159 23 131 156 248 22 134 160 216 228 41 145 195 66 73 111 133 63 164 57 100 177 146 161 52 65 171 90 243 135 39 238 218 130 153 49 96 212 209 91 174 215 235 101 225 71 48 233 27 155 143 240 120 138 217 107 210 44 110 80 150 181 76 55 83 103 199 237 211 183 46 127 191 47 21 26 188 72 25 136 68 168"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="75 113 24 146 191 92 239 204 88 206 199 64 72 30 178 223 77 48 91 168 76 71 162 159 175 106 196 111 124 32 54 241 99 129 224 169 90 180 94 26 174 207 28 118 202 142 250 225 177 65 109 197 161 214 164 166 228 137 31 192 145 149 163 171 218 210 138 215 235 126 143 74 131 85 185 69 45 81 193 61 209 152 181 107 205 27 186 59 58 160 78 22 140 95 121 52 112 231 97 155 108 102 29 216 244 179 73 230 240 123 23 20 153 242 139 188 190 87 208 100 236 53 246 170 84 130 144 238 63 128 213 232 103 127 141 34 150 220 70 68 158 134 201 247 66 104 101 116 79 110 165 212 82 219 44 173 36 200 189 43 47 151 157 133 172 120 67 80 55 184 115 194 33 38 89 227 226 167 183 217 243 154 39 86 198 147 221 182 176 40 49 211 187 156 234 237 25 42 233 50 93 117 62 83 114 105 41 248 35 96 46 148 125 51 122 21 135 60 136 98 56 249 57 222 229 132 37 203 119 245 195"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="240 79 130 184 207 242 69 244 48 125 230 137 183 171 160 229 89 200 83 50 119 118 57 220 71 185 84 97 164 236 170 158 64 144 90 165 103 36 166 167 247 128 58 122 179 199 51 149 201 23 73 156 140 105 224 31 111 143 223 98 225 204 157 110 134 77 94 40 99 228 44 135 133 26 66 61 100 47 92 181 146 188 154 245 159 34 147 226 35 206 24 116 43 78 234 106 186 115 151 217 68 56 131 248 243 54 52 235 148 121 25 74 101 239 124 96 38 49 65 113 76 194 176 20 168 91 93 126 39 211 75 155 152 197 187 198 218 21 192 62 196 70 80 221 237 30 182 249 129 108 132 232 250 191 95 153 41 114 189 33 32 42 205 138 209 150 175 117 28 27 233 238 203 85 86 162 214 241 231 67 22 127 63 172 107 88 37 174 123 169 141 82 59 72 46 195 29 142 173 45 177 104 216 109 178 81 212 219 53 193 180 190 227 136 215 139 55 210 163 208 202 112 222 102 60 246 87 161 213 145 120"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="235 122 138 94 49 43 166 162 77 91 62 54 66 188 96 127 213 59 194 119 186 185 190 27 26 149 221 109 75 187 151 21 87 204 227 24 217 81 145 55 170 153 209 131 192 205 240 201 206 175 103 92 243 173 242 64 117 228 116 73 143 218 28 199 69 112 155 154 161 144 211 183 148 181 158 200 71 50 133 97 68 225 123 197 82 105 83 88 58 239 20 167 232 80 57 184 110 34 210 147 246 142 140 237 72 113 89 37 139 25 169 93 229 244 178 168 79 45 29 102 120 67 48 198 44 86 160 230 207 74 172 174 214 52 219 233 60 107 202 236 65 196 165 126 125 61 189 234 56 216 212 245 53 42 152 191 182 32 132 22 111 135 121 129 163 128 157 136 195 90 224 85 179 215 180 141 171 164 31 101 23 231 150 238 146 226 159 114 100 222 241 223 115 36 46 134 35 76 118 41 84 78 130 108 95 106 70 33 39 250 248 124 208 98 40 193 47 156 30 176 63 247 38 99 104 137 177 249 203 220 51"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="117 163 244 233 235 75 194 206 214 106 186 165 66 23 190 204 146 144 68 47 201 87 82 76 191 207 81 183 162 61 225 114 24 108 89 147 90 240 196 35 80 94 118 64 170 116 91 232 115 43 250 39 37 241 73 109 54 205 168 113 46 174 31 209 222 160 195 79 218 111 173 84 151 58 32 153 63 247 52 172 211 140 30 217 77 56 152 135 74 188 171 210 128 177 159 101 230 200 132 130 185 53 88 42 231 197 234 33 219 145 179 71 100 203 246 223 120 238 34 157 178 193 212 167 95 175 60 48 229 126 99 127 154 41 192 248 45 189 59 221 27 237 103 25 67 57 236 28 38 181 216 21 139 44 22 121 202 29 176 158 136 149 123 187 208 134 70 131 182 102 85 98 224 129 65 119 150 166 243 104 156 62 110 20 148 36 105 245 164 133 169 137 249 96 138 83 49 51 40 198 97 213 143 199 93 142 72 125 184 220 180 78 124 69 215 227 226 161 50 55 112 242 92 228 107 141 122 26 155 86 239"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG
					ARG="164 122 209 192 48 56 39 125 188 62 198 228 81 215 105 218 200 72 233 225 190 175 196 25 178 74 204 247 46 205 162 128 64 199 70 203 137 249 136 149 166 110 80 246 68 202 151 134 150 181 63 32 118 83 236 152 45 120 84 50 234 43 36 34 184 240 229 250 227 90 42 89 191 222 85 96 165 69 129 121 167 174 172 232 119 75 78 22 113 173 179 65 197 49 104 124 52 91 144 187 112 59 106 31 231 161 115 94 214 88 245 109 219 24 66 139 182 186 133 212 67 20 221 194 132 123 237 57 169 51 213 23 138 87 153 101 193 206 142 29 163 140 216 116 102 243 33 159 195 44 53 220 141 60 176 130 170 35 183 77 145 40 38 58 160 47 100 226 241 230 92 148 55 223 155 76 211 147 131 21 114 146 95 157 189 177 171 235 30 61 41 180 127 73 143 71 117 99 111 208 210 239 82 54 27 185 98 224 168 217 135 28 108 93 242 244 37 86 238 158 201 97 103 154 156 79 126 26 107 207 248"; ./${NAME} $$ARG | wc -l; ./${NAME} $$ARG | ./${TESTER} $$ARG

.PHONY:				all clean fclean re test
